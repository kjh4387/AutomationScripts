import tkinter as tk
import logging
import DataHandler
from tkinter import ttk, messagebox

logger = logging.getLogger(__name__)
user_data = DataHandler.user_data()
mail_data = DataHandler.mail_data()
mail_template = DataHandler.mail_template()

def prompt_user_data():
    def submit_data():
        user_data.put_address(id_entry.get())
        user_data.put_password(pw_entry.get())
        root.destroy()

    # Create the main window
    root = tk.Tk()
    root.title("User Data GUI")

    # Create a frame to hold the widgets
    frame = ttk.Frame(root, padding="10")
    frame.grid(row=0, column=0, sticky=(tk.W, tk.E, tk.N, tk.S))

    # ID label and entry
    id_label = ttk.Label(frame, text="ID:")
    id_label.grid(row=0, column=0, sticky=tk.W, pady=5)
    id_entry = ttk.Entry(frame, width=20)
    id_entry.grid(row=0, column=1, pady=5)

    # Password label and entry
    pw_label = ttk.Label(frame, text="Password:")
    pw_label.grid(row=1, column=0, sticky=tk.W, pady=5)
    pw_entry = ttk.Entry(frame, width=20, show="*")  # 'show="*"' masks the password
    pw_entry.grid(row=1, column=1, pady=5)

    # Submit button
    submit_btn = ttk.Button(frame, text="Submit", command=submit_data)
    submit_btn.grid(row=2, column=0, columnspan=2, pady=10)

    root.mainloop()


def prompt_mail_data():
    def submit_data():
        mail_data.put_mailhost(server_entry.get())
        mail_data.put_mailport(port_entry.get())

        #server and port handler 제작 필요
        root.destroy()

    # Create the main window
    root = tk.Tk()
    root.title("User Data GUI")

    # Create a frame to hold the widgets
    frame = ttk.Frame(root, padding="10")
    frame.grid(row=0, column=0, sticky=(tk.W, tk.E, tk.N, tk.S))

    # ID label and entry
    id_label = ttk.Label(frame, text="smtp server:")
    id_label.grid(row=0, column=0, sticky=tk.W, pady=5)
    server_entry = ttk.Entry(frame, width=20)
    server_entry.grid(row=0, column=1, pady=5)

    # Password label and entry
    port_label = ttk.Label(frame, text="port(465 in general):")
    port_label.grid(row=1, column=0, sticky=tk.W, pady=5)
    port_entry = ttk.Entry(frame, width=20)  
    port_entry.grid(row=1, column=1, pady=5)

    # Submit button
    submit_btn = ttk.Button(frame, text="Submit", command=submit_data)
    submit_btn.grid(row=2, column=0, columnspan=2, pady=10)

    root.mainloop()

def prompt_template_data():
    def submit_data():
        mail_template.put_postingperiod(period_entry.get())
        mail_template.put_manager(manager_entry.get())

        #server and port handler 제작 필요
        root.destroy()

    # Create the main window
    root = tk.Tk()
    root.title("메일 내용 지정")

    # Create a frame to hold the widgets
    frame = ttk.Frame(root, padding="10")
    frame.grid(row=0, column=0, sticky=(tk.W, tk.E, tk.N, tk.S))

    period_label = ttk.Label(frame, text="게시기간:")
    period_label.grid(row=0, column=0, sticky=tk.W, pady=5)
    period_entry = ttk.Entry(frame, width=20)
    period_entry.grid(row=0, column=1, pady=5)

    manager_label = ttk.Label(frame, text="담당자(내선번호):")
    manager_label.grid(row=1, column=0, sticky=tk.W, pady=5)
    manager_entry = ttk.Entry(frame, width=20)  
    manager_entry.grid(row=1, column=1, pady=5)

    # Submit button
    submit_btn = ttk.Button(frame, text="Submit", command=submit_data)
    submit_btn.grid(row=2, column=0, columnspan=2, pady=10)

    root.mainloop()
